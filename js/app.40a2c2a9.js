(function(){"use strict";var e={7947:function(e,t,s){var r=s(9242),o=s(7139),a=s(6265),n=s.n(a);const l={namespaced:!0,state(){return{count:0}},mutations:{increment(e){e.count++},add(e,t){console.log("add.... in mutations"),e.count++}},actions:{add(e,t){console.log("add.... in actions"),e.commit("add",t)},serverApi(e){n().get("https://api.uixsj.cn/hitokoto/get?type=social").then((e=>{console.log("server response:",e.data)}),(e=>{alert(e.message)}))}},getters:{getComplexValue(e){return e.count+8}}};var i=l,c=(0,o.MT)({modules:{testOptions:i}}),u=s(678),d=s(3396);const p={class:"container"};function m(e,t,s,r,o,a){return(0,d.wg)(),(0,d.iD)("div",p)}class g{static log(...e){console.log(e)}}s(4147);var h=s(2482);class v{static isAllowed(e){if(null===e)return!1;for(let t=0;t<this.allowList.length;t++)if(e===this.allowList[t])return!0;return!1}static onAuthDone(e){const t=sessionStorage.getItem("return_url");if(null!==t&&void 0!==t&&""!==t)return this.isAllowed(t)?void(t.indexOf("?")>0?window.location.replace(t+"&access_token="+e):window.location.replace(t+"?access_token="+e)):void alert("invalid return url:"+t);alert("Login successfully")}}(0,h.Z)(v,"allowList",["https://www.cloud-dns.net","http://www.cloud-dns.net"]);var f=(0,d.aZ)({props:{access_token:{type:String,required:!1}},components:{},data(){return{}},mounted(){g.log("....a"),void 0===this.$route.query.access_token&&""===this.$route.query.access_token||null===this.$route.query.return_url?this.$router.replace({name:"Login",params:{}}):v.onAuthDone(this.$route.query.access_token+"")},methods:{userRegister(){}}}),b=s(89);const w=(0,b.Z)(f,[["render",m]]);var _=w;const y={class:"container"},k={class:"row justify-content-center"},A={class:"col-xl-10 col-lg-12 col-md-9"},S={class:"card o-hidden border-0 shadow-lg my-5"},x={class:"card-body p-0"},Z={class:"row"},O=(0,d._)("div",{class:"col-lg-6 d-none d-lg-block bg-login-image"},null,-1),U={class:"col-lg-6"},R={class:"p-5"},P=(0,d._)("div",{class:"text-center"},[(0,d._)("h1",{class:"h4 text-gray-900 mb-4"},"Welcome Back!")],-1),L={class:"form-group"},N={class:"form-group"},j=(0,d._)("div",{class:"form-group"},[(0,d._)("div",{class:"custom-control custom-checkbox small"},[(0,d._)("input",{type:"checkbox",class:"custom-control-input",id:"customCheck"}),(0,d._)("label",{class:"custom-control-label",for:"customCheck"},"Remember Me")])],-1),I=(0,d._)("hr",null,null,-1),C=["href"],D=(0,d._)("i",{class:"fab fa-google fa-fw"},null,-1),F=(0,d.Uk)(" Login with Google "),E=[D,F],T=(0,d._)("a",{href:"index.html",class:"btn btn-facebook btn-user btn-block"},[(0,d._)("i",{class:"fab fa-facebook-f fa-fw"}),(0,d.Uk)(" Login with Facebook ")],-1),$=(0,d._)("hr",null,null,-1),q={class:"text-center"},V=(0,d.Uk)("Forgot Password?"),W={class:"text-center"},M=(0,d.Uk)("Create an Account!");function G(e,t,s,o,a,n){const l=(0,d.up)("router-link");return(0,d.wg)(),(0,d.iD)("div",y,[(0,d._)("div",k,[(0,d._)("div",A,[(0,d._)("div",S,[(0,d._)("div",x,[(0,d._)("div",Z,[O,(0,d._)("div",U,[(0,d._)("div",R,[P,(0,d._)("form",{class:"user",onSubmit:t[3]||(t[3]=(0,r.iM)(((...t)=>e.setupObj.userLogin&&e.setupObj.userLogin(...t)),["prevent"]))},[(0,d._)("div",L,[(0,d.wy)((0,d._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=t=>e.setupObj.usr.email=t),class:"form-control form-control-user",id:"exampleInputEmail","aria-describedby":"emailHelp",placeholder:"Enter Email Address..."},null,512),[[r.nr,e.setupObj.usr.email,void 0,{trim:!0}]])]),(0,d._)("div",N,[(0,d.wy)((0,d._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=t=>e.setupObj.usr.password=t),class:"form-control form-control-user",id:"exampleInputPassword",placeholder:"Password"},null,512),[[r.nr,e.setupObj.usr.password,void 0,{trim:!0}]])]),j,(0,d._)("a",{href:"#",onClick:t[2]||(t[2]=(0,r.iM)((t=>e.setupObj.userLogin()),["prevent"])),class:"btn btn-primary btn-user btn-block"}," Login "),I,(0,d._)("a",{href:`${e.setupObj.apiServer}/googleOAuthTrigger`,class:"btn btn-google btn-user btn-block"},E,8,C),T],32),$,(0,d._)("div",q,[(0,d.Wm)(l,{class:"small","active-class":"active",to:"/ForgotPassword"},{default:(0,d.w5)((()=>[V])),_:1})]),(0,d._)("div",W,[(0,d.Wm)(l,{class:"small","active-class":"active",to:"/Register"},{default:(0,d.w5)((()=>[M])),_:1})])])])])])])])])])}var z,H=s(8541);class B{}(0,h.Z)(B,"tokenName","jcloudToken"),(0,h.Z)(B,"reflectKey","rule"),(0,h.Z)(B,"seprator_symb","&&"),function(e){e[e["NUMBER"]=0]="NUMBER",e[e["STRING"]=1]="STRING",e[e["BOOL"]=2]="BOOL",e[e["TextArea"]=3]="TextArea",e[e["SelectOption"]=4]="SelectOption",e[e["ARRAY"]=5]="ARRAY",e[e["PASSWORD"]=6]="PASSWORD"}(z||(z={}));function J(e,t,s){Reflect.defineMetadata(B.reflectKey,e,t,s)}class K{constructor(e,t){(0,h.Z)(this,"success",!1),(0,h.Z)(this,"msg",void 0),this.success=e,this.msg=t}}function Y(e=""){return function(t,s,r){J(new te(e),t,s)}}function Q(e=""){return function(t,s,r){J(new se(z.PASSWORD,e),t,s)}}function X(e="",t="",s="",r=z.STRING){return function(o,a,n){J(new ee(e,t,s,r),o,a)}}class ee{constructor(e,t="",s="",r=z.STRING){(0,h.Z)(this,"type",void 0),(0,h.Z)(this,"regex",void 0),(0,h.Z)(this,"displayLabel",void 0),(0,h.Z)(this,"extraData",void 0),this.displayLabel=t,this.regex=e,this.type=r,this.extraData=s}validate(e){return(e+"").match(this.regex)?new K(!0,""):new K(!1,e+" does not match "+this.regex)}}class te{constructor(e=""){(0,h.Z)(this,"regex","^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$"),(0,h.Z)(this,"type",void 0),(0,h.Z)(this,"displayLabel",void 0),(0,h.Z)(this,"extraData",""),this.displayLabel=e,this.type=z.STRING}validate(e){return(e+"").match(this.regex)?new K(!0,""):new K(!1,"Not a valid email address!")}}class se{constructor(e=z.STRING,t=""){(0,h.Z)(this,"type",void 0),(0,h.Z)(this,"displayLabel",void 0),(0,h.Z)(this,"extraData",""),(0,h.Z)(this,"regex","^.*(?=.{6,})(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$"),this.type=e,this.displayLabel=t}validate(e){return(e+"").match(this.regex)?new K(!0,""):new K(!1,"Password does not match security requirement!")}}function re(e,t){if(null!==e&&void 0!==e&&null!==t&&void 0!==t)for(const s in e){const r=e[s];g.log("key:",s," value:",r);const o=Reflect.getMetadata(B.reflectKey,e,s.toString());if(null===o||void 0===o)continue;const a=o,n=a.validate(r);if(!n.success&&(g.log(s," has invalid value:",r),t.onValid(a.displayLabel?a.displayLabel:s+"",n)))break}}var oe=function(e,t,s,r){var o,a=arguments.length,n=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,s,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(a<3?o(n):a>3?o(t,s,n):o(t,s))||n);return a>3&&n&&Object.defineProperty(t,s,n),n};class ae{constructor(){(0,h.Z)(this,"firstName",void 0),(0,h.Z)(this,"lastName",void 0),(0,h.Z)(this,"email",void 0),(0,h.Z)(this,"password",void 0),(0,h.Z)(this,"confirmpassword",void 0)}}oe([X("","名","")],ae.prototype,"firstName",void 0),oe([X("","姓","")],ae.prototype,"lastName",void 0),oe([Y("邮件")],ae.prototype,"email",void 0),oe([Q("密码")],ae.prototype,"password",void 0),oe([Q("确认密码")],ae.prototype,"confirmpassword",void 0);var ne,le=s(1059);(function(e){e["CloudUserHost"]="https://userapi.cloud-ip.net:88"})(ne||(ne={}));var ie=ne;class ce{static getAPIServer(){return ie.CloudUserHost.endsWith("/")?ie.CloudUserHost.substring(0,ie.CloudUserHost.length-1):ie.CloudUserHost}}class ue{constructor(){}static getApiService(){return null!==this.apiService&&void 0!==this.apiService||(this.apiService=new ue,g.log("ApiServiceImpl is null=========",this.apiService)),g.log("ApiServiceImpl=========",this.apiService),this.apiService}async login(e,t,s){await this.loginAPI(e,t,s)}loginAPI(e,t,s){return new Promise((r=>{n().post(ue.LoginApiUrl,JSON.stringify({email:e,password:le.V.init(t)}),{headers:{"Content-Type":"application/json"}}).then((e=>{g.log("server response:",e.data),e.data.access_token?s.onSuccess(e.data.access_token):s.onFailed(e.data.msg)}),(e=>{s.onFailed(e.message),alert(e.message)}))}))}RegisterAPI(e,t,s){return new Promise((r=>{n().post(ue.regApiUrl,JSON.stringify({name:"zhangsan",email:e,password:le.V.init(t)}),{headers:{"Content-Type":"application/json"}}).then((e=>{console.log("server response:",e.data),"ok"===e.data.status?s.onSuccess(e.data.id):s.onFailed(e.data.msg)}),(e=>{s.onFailed(e.message),alert(e.message)}))}))}async register(e,t,s){await this.RegisterAPI(e,t,s)}async logOut(e,t){await n().post(ue.LogoutApiUrl,{},{params:{access_token:e}}).then((e=>{console.log("server response in success:",e.data),t.onDone()}),(e=>{console.log("server response in error:",e.data)}))}async tokenStatus(e,t){await n().post(ue.tokenStatusApiUrl,{},{params:{access_token:e}}).then((e=>{console.log("server response in success:",e.data),e.data.status?t.onValid():t.onInValid()}),(e=>{console.log("server response in error:",e.data)}))}}(0,h.Z)(ue,"baseApiUrl",ce.getAPIServer()),(0,h.Z)(ue,"regApiUrl",ue.baseApiUrl+"/register"),(0,h.Z)(ue,"LoginApiUrl",ue.baseApiUrl+"/login"),(0,h.Z)(ue,"tokenStatusApiUrl",ue.baseApiUrl+"/tokenStatus"),(0,h.Z)(ue,"LogoutApiUrl",ue.baseApiUrl+"/logout"),(0,h.Z)(ue,"apiService",void 0);var de=s(4870),pe=(0,d.aZ)({props:{return_url:{type:String,required:!1}},setup(){let e=new ae,t=ce.getAPIServer();function s(){g.log(e),ue.getApiService().login(e.email,e.password,{onFailed(e){alert(e)},onSuccess(e){alert(e),sessionStorage.setItem(B.tokenName,e),v.onAuthDone(e)}})}let r=(0,de.qj)({usr:e,apiServer:t,userLogin:s});const{cookies:o}=(0,H.fP)();return{cookies:o,setupObj:r}},data(){return{}},mounted(){g.log("return_url:{}",this.$route.query.return_url),void 0!==this.$route.query.return_url&&""!==this.$route.query.return_url&&null!==this.$route.query.return_url?(g.log("return_url not null"),sessionStorage.setItem("return_url",this.$route.query.return_url+""),this.cookies.set("return_url",this.$route.query.return_url+"")):(g.log("return_url null"),this.cookies.remove("return_url"))}});const me=(0,b.Z)(pe,[["render",G]]);var ge=me;const he={class:"container"},ve={class:"card o-hidden border-0 shadow-lg my-5"},fe={class:"card-body p-0"},be={class:"row"},we=(0,d._)("div",{class:"col-lg-5 d-none d-lg-block bg-register-image"},null,-1),_e={class:"col-lg-7"},ye={class:"p-5"},ke=(0,d._)("div",{class:"text-center"},[(0,d._)("h1",{class:"h4 text-gray-900 mb-4"},"Create an Account!")],-1),Ae={class:"user"},Se={class:"form-group row"},xe={class:"col-sm-6 mb-3 mb-sm-0"},Ze={class:"col-sm-6"},Oe={class:"form-group"},Ue={class:"form-group row"},Re={class:"col-sm-6 mb-3 mb-sm-0"},Pe={class:"col-sm-6"},Le=(0,d._)("hr",null,null,-1),Ne=(0,d._)("a",{href:"index.html",class:"btn btn-google btn-user btn-block"},[(0,d._)("i",{class:"fab fa-google fa-fw"}),(0,d.Uk)(" Register with Google ")],-1),je=(0,d._)("a",{href:"index.html",class:"btn btn-facebook btn-user btn-block"},[(0,d._)("i",{class:"fab fa-facebook-f fa-fw"}),(0,d.Uk)(" Register with Facebook ")],-1),Ie=(0,d._)("hr",null,null,-1),Ce={class:"text-center"},De=(0,d.Uk)("Forgot Password?"),Fe={class:"text-center"},Ee=(0,d.Uk)("Already have an account? Login!");function Te(e,t,s,o,a,n){const l=(0,d.up)("router-link");return(0,d.wg)(),(0,d.iD)("div",he,[(0,d._)("div",ve,[(0,d._)("div",fe,[(0,d._)("div",be,[we,(0,d._)("div",_e,[(0,d._)("div",ye,[ke,(0,d._)("form",Ae,[(0,d._)("div",Se,[(0,d._)("div",xe,[(0,d.wy)((0,d._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.user.firstName=t),class:"form-control form-control-user",id:"exampleFirstName",placeholder:"First Name"},null,512),[[r.nr,e.user.firstName]])]),(0,d._)("div",Ze,[(0,d.wy)((0,d._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.user.lastName=t),class:"form-control form-control-user",id:"exampleLastName",placeholder:"Last Name"},null,512),[[r.nr,e.user.lastName]])])]),(0,d._)("div",Oe,[(0,d.wy)((0,d._)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=t=>e.user.email=t),class:"form-control form-control-user",id:"exampleInputEmail",placeholder:"Email Address"},null,512),[[r.nr,e.user.email]])]),(0,d._)("div",Ue,[(0,d._)("div",Re,[(0,d.wy)((0,d._)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=t=>e.user.password=t),class:"form-control form-control-user",id:"exampleInputPassword",placeholder:"Password"},null,512),[[r.nr,e.user.password]])]),(0,d._)("div",Pe,[(0,d.wy)((0,d._)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=t=>e.user.confirmpassword=t),class:"form-control form-control-user",id:"exampleRepeatPassword",placeholder:"Repeat Password"},null,512),[[r.nr,e.user.confirmpassword]])])]),(0,d._)("a",{href:"#",onClick:t[5]||(t[5]=(0,r.iM)((t=>e.userRegister()),["prevent"])),class:"btn btn-primary btn-user btn-block"}," Register Account "),Le,Ne,je]),Ie,(0,d._)("div",Ce,[(0,d.Wm)(l,{class:"small","active-class":"active",to:"/ForgotPassword"},{default:(0,d.w5)((()=>[De])),_:1})]),(0,d._)("div",Fe,[(0,d.Wm)(l,{class:"small","active-class":"active",to:"/Login"},{default:(0,d.w5)((()=>[Ee])),_:1})])])])])])])])}var $e=(0,d.aZ)({components:{},data(){return{user:new ae}},mounted(){},methods:{userRegister(){g.log("in userRegister....",this.user.email,this.user.password,this.user.confirmpassword);let e=!1;re(this.user,{onValid(t,s){return e=!0,alert(t+":"+s.msg),!0}}),e||(console.log(JSON.stringify(this.user)),ue.getApiService().register(this.user.email,this.user.password,{onFailed(e){alert(e),g.log("register.onFailed",e)},onSuccess(e){alert(" user register Successfully!"),g.log("register.onSuccess",e)}}))},delivery_Data(e,t=""){console.log("target:",JSON.stringify(e)),alert(t)}}});const qe=(0,b.Z)($e,[["render",Te]]);var Ve=qe;const We={class:"container"},Me={class:"row justify-content-center"},Ge={class:"col-xl-10 col-lg-12 col-md-9"},ze={class:"card o-hidden border-0 shadow-lg my-5"},He={class:"card-body p-0"},Be={class:"row"},Je=(0,d._)("div",{class:"col-lg-6 d-none d-lg-block bg-password-image"},null,-1),Ke={class:"col-lg-6"},Ye={class:"p-5"},Qe=(0,d.uE)('<div class="text-center"><h1 class="h4 text-gray-900 mb-2">Forgot Your Password?</h1><p class="mb-4">We get it, stuff happens. Just enter your email address below and we&#39;ll send you a link to reset your password!</p></div><form class="user"><div class="form-group"><input type="email" class="form-control form-control-user" id="exampleInputEmail" aria-describedby="emailHelp" placeholder="Enter Email Address..."></div><a href="login.html" class="btn btn-primary btn-user btn-block"> Reset Password </a></form><hr>',3),Xe={class:"text-center"},et=(0,d.Uk)("Create an Account!"),tt={class:"text-center"},st=(0,d.Uk)("Already have an account? Login!");function rt(e,t,s,r,o,a){const n=(0,d.up)("router-link");return(0,d.wg)(),(0,d.iD)("div",We,[(0,d._)("div",Me,[(0,d._)("div",Ge,[(0,d._)("div",ze,[(0,d._)("div",He,[(0,d._)("div",Be,[Je,(0,d._)("div",Ke,[(0,d._)("div",Ye,[Qe,(0,d._)("div",Xe,[(0,d.Wm)(n,{class:"small","active-class":"active",to:"/Register"},{default:(0,d.w5)((()=>[et])),_:1})]),(0,d._)("div",tt,[(0,d.Wm)(n,{class:"small","active-class":"active",to:"/Login"},{default:(0,d.w5)((()=>[st])),_:1})])])])])])])])])])}var ot={name:"ForgotPassword"};const at=(0,b.Z)(ot,[["render",rt]]);var nt=at;const lt=(0,u.p7)({history:(0,u.PO)(),routes:[{path:"/Login",name:"Login",component:ge,meta:{title:"用户登录",isAuth:!1}},{path:"/Register",name:"Register",component:Ve,meta:{title:"用户注册",isAuth:!1}},{path:"/ForgotPassword",name:"ForgotPassword",component:nt,meta:{title:"忘记密码",isAuth:!1}},{path:"/oauthDone",name:"oauthDone",component:_,meta:{title:"认证",isAuth:!1}},{path:"/",redirect:"/Login"}]});lt.beforeEach(((e,t,s)=>{console.log("beforeEach....",e.path),e.meta.isAuth?(console.log("applying router protection.......",e.path),sessionStorage.getItem(B.tokenName)&&s()):s()})),lt.afterEach(((e,t)=>{document.title=e.meta.title||"myTitle",console.log("afterEach....")}));var it=lt;function ct(e,t,s,r,o,a){const n=(0,d.up)("router-view");return(0,d.wg)(),(0,d.j4)(n)}var ut=(0,d.aZ)({data(){return{}},computed:{},mounted(){},methods:{}});const dt=(0,b.Z)(ut,[["render",ct]]);var pt=dt,mt={version(){return"1.0.0"},install(e){g.log("installing this plugin..."),e.directive("bigdog",{mounted(e,t){g.log("Customized Directives...mounted")},updated(e,t){g.log("Customized Directives...updated",t.value)}})}};const gt=(0,r.ri)(pt).use(it).use(c).use(mt);gt.mount("#app")}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,a){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var l=!0,i=0;i<r.length;i++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[i])}))?r.splice(i--,1):(l=!1,a<n&&(n=a));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,n=r[0],l=r[1],i=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(i)var u=i(s)}for(t&&t(r);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},r=self["webpackChunkCloudUsersPortal"]=self["webpackChunkCloudUsersPortal"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(7947)}));r=s.O(r)})();